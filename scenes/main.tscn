[gd_scene load_steps=32 format=4 uid="uid://dmv02jjjv5c63"]

[ext_resource type="PackedScene" uid="uid://bpqxt1wpujfsh" path="res://scenes/personatge.tscn" id="1_jscy8"]
[ext_resource type="PackedScene" uid="uid://4jqichsfbqgw" path="res://scenes/enemy.tscn" id="2_pm3ni"]
[ext_resource type="Texture2D" uid="uid://up0xde3nx447" path="res://icon.svg" id="3_y6deb"]
[ext_resource type="Script" uid="uid://c4oai404dbguj" path="res://scripts/camera.gd" id="4_og1vs"]
[ext_resource type="Script" uid="uid://vi7kqfv7n3ij" path="res://scripts/caixa.gd" id="5_2wyq8"]
[ext_resource type="Texture2D" uid="uid://1dvi46le7j5o" path="res://sprites/Crate.png" id="6_vxglm"]
[ext_resource type="Texture2D" uid="uid://dltflf5dtrbt1" path="res://sprites/checkerboard.png" id="7_2f3dj"]
[ext_resource type="PackedScene" uid="uid://dnlrylggjguv3" path="res://scenes/habitacion3botones.tscn" id="8_0ld40"]
[ext_resource type="Script" uid="uid://cpou1suvwk4dm" path="res://scripts/HP_bar.gd" id="9_fv21b"]
[ext_resource type="PackedScene" uid="uid://b2700iinhq1py" path="res://scenes/HeartHealthBar.tscn" id="10_tel4y"]
[ext_resource type="Script" uid="uid://cg6yqvrdb014m" path="res://scripts/coin_counter.gd" id="11_qkpxi"]
[ext_resource type="PackedScene" uid="uid://b4wb3ybf8fa4f" path="res://scenes/sign.tscn" id="12_0ld40"]
[ext_resource type="PackedScene" uid="uid://c1yw38rftmf7l" path="res://scenes/UI.tscn" id="14_j8jky"]
[ext_resource type="TileSet" uid="uid://bywgwy8d2sptc" path="res://tileset.tres" id="15_kmb1v"]
[ext_resource type="PackedScene" uid="uid://c3h0gd1a66qgj" path="res://scenes/door.tscn" id="16_gqmmt"]
[ext_resource type="PackedScene" uid="uid://db804mlemet80" path="res://scenes/doorhoritzontal.tscn" id="17_gqmmt"]
[ext_resource type="PackedScene" uid="uid://bs08e5cuem32v" path="res://scenes/key.tscn" id="17_yc10j"]
[ext_resource type="PackedScene" uid="uid://ch3gwfsn8arka" path="res://scenes/tutorial_ui.tscn" id="20_gqmmt"]
[ext_resource type="Texture2D" uid="uid://bty2a5s1roxbw" path="res://sprites/ArrowTrapSide.png" id="21_og1vs"]
[ext_resource type="Script" uid="uid://dm31e07btpdbm" path="res://scenes/pressure_plate.gd" id="21_yc10j"]
[ext_resource type="PackedScene" uid="uid://dntyfq35bplyf" path="res://scenes/coin.tscn" id="22_chjal"]
[ext_resource type="PackedScene" uid="uid://c7xjjjd0py33n" path="res://scenes/pause_menu.tscn" id="23_pm3ni"]
[ext_resource type="Texture2D" uid="uid://b4wygavfh26fr" path="res://sprites/Button1.png" id="24_2f3dj"]
[ext_resource type="Script" uid="uid://dj5q2nn63qlke" path="res://scenes/trap.gd" id="24_og1vs"]
[ext_resource type="PackedScene" uid="uid://dhpvlql0ni5en" path="res://scenes/Arrow.tscn" id="25_2wyq8"]
[ext_resource type="Texture2D" uid="uid://dcq0hxaelju2g" path="res://sprites/Button2.png" id="25_yq6so"]

[sub_resource type="RectangleShape2D" id="RectangleShape2D_7mycd"]
size = Vector2(117.5926, 128)

[sub_resource type="RectangleShape2D" id="RectangleShape2D_4c57u"]
size = Vector2(79, 80)

[sub_resource type="RectangleShape2D" id="RectangleShape2D_jscy8"]
size = Vector2(65.5, 75.5)

[sub_resource type="RectangleShape2D" id="RectangleShape2D_2wyq8"]
size = Vector2(62, 33)

[sub_resource type="RectangleShape2D" id="RectangleShape2D_vxglm"]
size = Vector2(69, 32)

[node name="Node2D" type="Node2D"]
y_sort_enabled = true

[node name="Personatge" parent="." node_paths=PackedStringArray("coin_counter") instance=ExtResource("1_jscy8")]
position = Vector2(835, 12)
collision_mask = 7
coin_counter = NodePath("../CanvasLayer/CoinCounter")

[node name="Enemy" parent="." node_paths=PackedStringArray("chasee") instance=ExtResource("2_pm3ni")]
position = Vector2(616, 346)
chasee = NodePath("../Personatge")

[node name="StaticBody2D" type="StaticBody2D" parent="."]
position = Vector2(221, 250)
scale = Vector2(1.08, 1)

[node name="CollisionShape2D" type="CollisionShape2D" parent="StaticBody2D"]
position = Vector2(-0.46296692, 0)
shape = SubResource("RectangleShape2D_7mycd")

[node name="Sprite2D" type="Sprite2D" parent="StaticBody2D"]
y_sort_enabled = true
scale = Vector2(0.9259259, 1)
texture = ExtResource("3_y6deb")

[node name="Camera2D" type="Camera2D" parent="." node_paths=PackedStringArray("player")]
position = Vector2(800, 283)
script = ExtResource("4_og1vs")
player = NodePath("../Personatge")

[node name="Caixa" type="RigidBody2D" parent="."]
position = Vector2(1006, 55)
mass = 0.1
gravity_scale = 0.0
lock_rotation = true
linear_damp = 3.0
script = ExtResource("5_2wyq8")

[node name="CollisionShape2D" type="CollisionShape2D" parent="Caixa"]
position = Vector2(-852.5, -121)
shape = SubResource("RectangleShape2D_4c57u")

[node name="Sprite2D" type="Sprite2D" parent="Caixa"]
position = Vector2(-852, -140)
scale = Vector2(0.8, 1)
texture = ExtResource("6_vxglm")

[node name="Checkerboard" type="Sprite2D" parent="."]
self_modulate = Color(1, 1, 1, 0.6509804)
z_index = -10
texture_repeat = 2
position = Vector2(762, 281)
texture = ExtResource("7_2f3dj")
region_enabled = true
region_rect = Rect2(0, 0, 2000, 1000)

[node name="Node2D" parent="." instance=ExtResource("8_0ld40")]
position = Vector2(454, -860)

[node name="CanvasLayer" type="CanvasLayer" parent="."]

[node name="HealthBar" type="Control" parent="CanvasLayer" node_paths=PackedStringArray("personatge")]
layout_mode = 3
anchors_preset = 0
offset_right = 550.0
offset_bottom = 115.0
script = ExtResource("9_fv21b")
personatge = NodePath("../../Personatge")
heart_scn = ExtResource("10_tel4y")

[node name="HBoxContainer" type="HBoxContainer" parent="CanvasLayer/HealthBar"]
layout_mode = 0
offset_right = 564.0
offset_bottom = 107.0
theme_override_constants/separation = -21

[node name="CoinCounter" type="Label" parent="CanvasLayer"]
offset_left = 1006.0
offset_top = 10.0
offset_right = 1130.0
offset_bottom = 102.0
script = ExtResource("11_qkpxi")

[node name="sign" parent="." instance=ExtResource("12_0ld40")]
position = Vector2(580, -1122)
text_sign = "Tots han d'estar en el mateix estat"

[node name="UI" parent="." instance=ExtResource("14_j8jky")]

[node name="TileMapLayer" type="TileMapLayer" parent="."]
position = Vector2(689, 324.00003)
scale = Vector2(2.5710034, 1.6240765)
tile_map_data = PackedByteArray("AAD///v/AAADAAAAAAD+//v/AAADAAAAAAD9//v/AAADAAAAAAD8//v/AAADAAAAAAAAAPv/AAACAAAAABABAPv/AAACAAAAAAACAPv/AAADAAAAAAADAPv/AAADAAAAAAAEAPv/AAADAAAAAAAFAPv/AAAAAAAAAAAFAAMAAAADAAMAAAAFAAIAAAADAAIAAAAFAAEAAAADAAIAAAAFAAAAAAADAAIAAAAFAP//AAADAAIAAAAFAP7/AAADAAIAAAAFAP3/AAADAAIAAAD7/wMAAAAAAAIAAAAEAAMAAAABAAIAAAADAAMAAAABAAIAAAACAAMAAAABAAIAAAABAAMAAAABAAIAAAAAAAMAAAABAAIAAAD//wMAAAABAAIAAAD+/wMAAAABAAIAAAD9/wMAAAABAAIAAAD8/wMAAAABAAIAAAD7/wIAAAABAAAAAAD7/wEAAAABAAAAAAD7/wAAAAABAAAAAAAFAPz/AAADAAIAAAD7//v/AAABAAMAAAD7//z/AAACAAIAACD7//3/AAACAAEAAAD7////AAACAAIAAAD///r/AAAAAAAAADACAPr/AAAAAAAAACABAPr/AAACAAAAACAAAPr/AAACAAAAADACAPn/AAADAAIAAAACAPj/AAADAAIAAAD///n/AAABAAAAAAD///j/AAABAAAAAAACAPf/AAAAAAAAAAD///f/AAABAAMAAAABAPf/AAACAAAAAAAAAPf/AAACAAAAABAAAPb/AAACAAAAADABAPb/AAACAAAAACACAPb/AAADAAAAACD///b/AAADAAAAACD8//b/AAAAAAAAADAFAPb/AAAAAAAAACD9//b/AAADAAAAACD+//b/AAADAAAAACADAPb/AAADAAAAACAEAPb/AAADAAAAACAFAPX/AAADAAIAAAAFAPT/AAADAAIAAAAFAPP/AAADAAIAAAAFAPL/AAADAAIAAAD8//X/AAABAAAAAAD8//T/AAABAAAAAAD8//P/AAABAAAAAAD8//L/AAABAAAAAAD8//H/AAAAAAAAABAFAPH/AAAAAAAAAAD9//H/AAADAAAAAAD+//H/AAADAAAAAAD///H/AAADAAAAAAAAAPH/AAACAAAAABABAPH/AAACAAAAAAACAPH/AAADAAAAAAADAPH/AAADAAAAAAAEAPH/AAADAAAAAAAAAPD/AAACAAAAADABAPD/AAACAAAAACD///D/AAADAAAAACACAPD/AAADAAAAACADAPD/AAADAAAAACAEAPD/AAADAAAAACD+//D/AAADAAAAACD9//D/AAADAAAAACD8//D/AAADAAAAACD7//D/AAADAAAAACAFAPD/AAADAAAAACAGAPD/AAADAAAAACD6//D/AAADAAAAACAHAPD/AAADAAAAACAIAPD/AAAAAAAAACD5//D/AAAAAAAAADD5/+//AAABAAAAAAD5/+7/AAABAAAAAAD5/+3/AAABAAAAAAD5/+z/AAABAAAAAAD5/+v/AAABAAAAAAD5/+r/AAABAAAAAAD5/+n/AAABAAAAAAD5/+j/AAABAAAAAAD5/+f/AAABAAAAAAAIAO//AAABAAAAABAIAO7/AAABAAAAABAIAO3/AAABAAAAABAIAOz/AAABAAAAABAIAOv/AAABAAAAABAIAOr/AAABAAAAABAIAOn/AAABAAAAABAIAOj/AAABAAAAABAIAOf/AAABAAAAABAIAOb/AAAAAAAAAAD5/+b/AAAAAAAAABD6/+b/AAADAAAAAAD7/+b/AAADAAAAAAD8/+b/AAADAAAAAAD9/+b/AAAAAAAAAAD9/+f/AAADAAIAAAD9/+j/AAADAAIAAAD9/+n/AAAAAAAAACD8/+n/AAADAAAAACD7/+n/AAADAAAAACD7/+r/AAADAAAAAAD8/+r/AAADAAAAAAD9/+r/AAADAAAAAAD6/+r/AAACAAAAAAD6/+n/AAACAAAAACD+/+b/AAAAAAAAABD+/+f/AAADAAIAABD+/+j/AAADAAIAABD+/+n/AAADAAIAABD+/+r/AAACAAAAABD//+b/AAADAAAAAAAGAPH/AAADAAAAAAAHAPH/AAADAAAAAAAIAPH/AAADAAAAAAD7//H/AAADAAAAAAD6//H/AAADAAAAAAD5//H/AAADAAAAAAAAAOb/AAADAAAAAAABAOb/AAADAAAAAAACAOb/AAADAAAAAAAHAOb/AAADAAAAAAAGAOb/AAADAAAAAAAFAOb/AAADAAAAAAAEAOb/AAADAAAAAAADAOb/AAADAAAAAAD+//f/AAADAAAAAAD9//f/AAADAAAAAAADAPf/AAADAAAAAAAEAPf/AAADAAAAAAD8//f/AAADAAAAAAAFAPf/AAADAAAAAAD6//v/AAAAAAAAAAD6/wMAAAAAAAAAACD6/wIAAAADAAIAAAD6/wEAAAADAAIAAAD6/wAAAAADAAIAAAD6////AAACAAIAABD6//z/AAACAAIAADD5//v/AAADAAAAAAD4//v/AAADAAAAAAD3//v/AAADAAAAAAD2//v/AAADAAAAAAD1//v/AAADAAAAAAD0//v/AAADAAAAAAD5/wMAAAADAAAAACD4/wMAAAADAAAAACD3/wMAAAADAAAAACD2/wMAAAADAAAAACD1/wMAAAADAAAAACD0/wMAAAADAAAAACDz//v/AAAAAAAAABDz/wMAAAAAAAAAADDz/wIAAAADAAIAABDz/wAAAAADAAIAABDz/wEAAAADAAIAABDz////AAADAAIAABDz//7/AAADAAIAABDz//3/AAADAAIAABDz//z/AAADAAIAABA=")
tile_set = ExtResource("15_kmb1v")

[node name="door" parent="." instance=ExtResource("16_gqmmt")]
position = Vector2(-130, 121.750015)
scale = Vector2(1.203125, 1.2910157)

[node name="door2" parent="." instance=ExtResource("17_gqmmt")]
position = Vector2(853, -238)
scale = Vector2(1.1200024, 1)
show_hint = true
requiresCondition = false
needs_key = false
key_id = "red"

[node name="KeyBlue" parent="." instance=ExtResource("17_yc10j")]
position = Vector2(157, -95)

[node name="KeyRed" parent="." instance=ExtResource("17_yc10j")]
position = Vector2(1497, -109)
key_id = "red"

[node name="Coin" parent="." instance=ExtResource("22_chjal")]
position = Vector2(281, -50)

[node name="Coin2" parent="." instance=ExtResource("22_chjal")]
position = Vector2(778, 279)

[node name="Coin3" parent="." instance=ExtResource("22_chjal")]
position = Vector2(380, 367)

[node name="Coin4" parent="." instance=ExtResource("22_chjal")]
position = Vector2(1006, -55)

[node name="Coin5" parent="." instance=ExtResource("22_chjal")]
position = Vector2(1209, 202)

[node name="Coin6" parent="." instance=ExtResource("22_chjal")]
position = Vector2(368.5, 58.5)

[node name="Coin7" parent="." instance=ExtResource("22_chjal")]
position = Vector2(1086, 296)

[node name="Coin8" parent="." instance=ExtResource("22_chjal")]
position = Vector2(467.5, 475.5)

[node name="Coin9" parent="." instance=ExtResource("22_chjal")]
position = Vector2(1093.5, 53.5)

[node name="Coin10" parent="." instance=ExtResource("22_chjal")]
position = Vector2(1296.5, 310.5)

[node name="CanvasLayer2" type="CanvasLayer" parent="."]
process_mode = 3
visible = false

[node name="pause_menu" parent="CanvasLayer2" instance=ExtResource("23_pm3ni")]

[node name="TutorialUI" parent="." instance=ExtResource("20_gqmmt")]

[node name="PressurePlate" type="Area2D" parent="." node_paths=PackedStringArray("traps")]
script = ExtResource("21_yc10j")
sprite_normal = ExtResource("24_2f3dj")
sprite_pressed = ExtResource("25_yq6so")
traps = [NodePath("../ArrowTrapLeft"), NodePath("../ArrowTrapRight")]

[node name="CollisionShape2D" type="CollisionShape2D" parent="PressurePlate"]
position = Vector2(786, 442)
shape = SubResource("RectangleShape2D_jscy8")

[node name="Sprite2D" type="Sprite2D" parent="PressurePlate"]
position = Vector2(787, 441)
texture = ExtResource("24_2f3dj")

[node name="ArrowTrapLeft" type="StaticBody2D" parent="." node_paths=PackedStringArray("spawn_point")]
position = Vector2(-718, -13)
collision_mask = 2
script = ExtResource("24_og1vs")
arrow_scene = ExtResource("25_2wyq8")
arrow_speed = 1500.0
spawn_point = NodePath("ArrowSpawn")

[node name="Sprite2D" type="Sprite2D" parent="ArrowTrapLeft"]
position = Vector2(710, 434)
texture = ExtResource("21_og1vs")

[node name="CollisionShape2D" type="CollisionShape2D" parent="ArrowTrapLeft"]
position = Vector2(710, 466)
shape = SubResource("RectangleShape2D_2wyq8")

[node name="ArrowSpawn" type="Marker2D" parent="ArrowTrapLeft"]
position = Vector2(741, 431)

[node name="ArrowTrapRight" type="StaticBody2D" parent="." node_paths=PackedStringArray("spawn_point")]
position = Vector2(603, 376)
collision_mask = 2
script = ExtResource("24_og1vs")
arrow_scene = ExtResource("25_2wyq8")
arrow_speed = 1500.0
shoot_direction = Vector2(-1, 0)
spawn_point = NodePath("ArrowSpawn")
sprite_flip_h = true

[node name="Sprite2D" type="Sprite2D" parent="ArrowTrapRight"]
position = Vector2(943, 55)
texture = ExtResource("21_og1vs")

[node name="CollisionShape2D" type="CollisionShape2D" parent="ArrowTrapRight"]
position = Vector2(943, 86)
shape = SubResource("RectangleShape2D_vxglm")

[node name="ArrowSpawn" type="Marker2D" parent="ArrowTrapRight"]
position = Vector2(912, 54)

[connection signal="take_damage" from="Personatge" to="Camera2D" method="_on_personatge_take_damage"]
