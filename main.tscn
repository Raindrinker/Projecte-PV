[gd_scene load_steps=27 format=4 uid="uid://dmv02jjjv5c63"]

[ext_resource type="PackedScene" uid="uid://bpqxt1wpujfsh" path="res://personatge.tscn" id="1_1bvp3"]
[ext_resource type="Script" uid="uid://uy5a53dnsmth" path="res://enemy.gd" id="2_7mycd"]
[ext_resource type="Texture2D" uid="uid://diqy3ep5pljw5" path="res://sprites/Shadow.png" id="2_h2yge"]
[ext_resource type="Script" uid="uid://dxi3tf4phmci8" path="res://squash.gd" id="3_1bvp3"]
[ext_resource type="Texture2D" uid="uid://cr3lsfkdm3vur" path="res://sprites/Creature2.png" id="3_h2yge"]
[ext_resource type="Texture2D" uid="uid://up0xde3nx447" path="res://icon.svg" id="5_lquwl"]
[ext_resource type="Script" uid="uid://c4oai404dbguj" path="res://camera.gd" id="8_5vw27"]
[ext_resource type="Script" uid="uid://vi7kqfv7n3ij" path="res://caixa.gd" id="8_kek77"]
[ext_resource type="Texture2D" uid="uid://1dvi46le7j5o" path="res://sprites/Crate.png" id="9_kek77"]
[ext_resource type="Texture2D" uid="uid://dltflf5dtrbt1" path="res://sprites/checkerboard.png" id="10_4c57u"]
[ext_resource type="Texture2D" uid="uid://b4wygavfh26fr" path="res://sprites/Button1.png" id="11_efxa6"]
[ext_resource type="Texture2D" uid="uid://cpyh8gymdh0j1" path="res://sprites/Sign.png" id="12_ycdy4"]
[ext_resource type="Script" uid="uid://gicvawwf4ghr" path="res://sign.gd" id="13_w48qg"]
[ext_resource type="Script" uid="uid://cpou1suvwk4dm" path="res://HP_bar.gd" id="14_w48qg"]
[ext_resource type="Texture2D" uid="uid://kg5bcpx3msxk" path="res://sprites/Tower1.png" id="15_2cqfq"]
[ext_resource type="TileSet" uid="uid://bywgwy8d2sptc" path="res://tileset.tres" id="15_yaehf"]
[ext_resource type="Script" uid="uid://cgt8g6rivxvbb" path="res://door.gd" id="16_yaehf"]
[ext_resource type="Texture2D" uid="uid://1yw15fwh1opb" path="res://sprites/Arrow.png" id="18_cegan"]
[ext_resource type="Script" uid="uid://5yey0pw7ucd7" path="res://key.gd" id="19_82xsv"]

[sub_resource type="ShaderMaterial" id="ShaderMaterial_5vw27"]

[sub_resource type="CircleShape2D" id="CircleShape2D_lquwl"]
radius = 33.01515

[sub_resource type="RectangleShape2D" id="RectangleShape2D_7mycd"]
size = Vector2(117.5926, 128)

[sub_resource type="RectangleShape2D" id="RectangleShape2D_4c57u"]
size = Vector2(79, 80)

[sub_resource type="CircleShape2D" id="CircleShape2D_vivmo"]
radius = 11.443709

[sub_resource type="RectangleShape2D" id="RectangleShape2D_2cqfq"]
size = Vector2(170, 277)

[sub_resource type="RectangleShape2D" id="RectangleShape2D_getpj"]
size = Vector2(70, 21)

[node name="Node2D" type="Node2D"]
y_sort_enabled = true

[node name="Personatge" parent="." instance=ExtResource("1_1bvp3")]
position = Vector2(545, 182)

[node name="Enemy" type="CharacterBody2D" parent="." node_paths=PackedStringArray("chasee")]
y_sort_enabled = true
position = Vector2(616, 346)
motion_mode = 1
script = ExtResource("2_7mycd")
chasee = NodePath("../Personatge")

[node name="Body" type="Node2D" parent="Enemy"]
y_sort_enabled = true
script = ExtResource("3_1bvp3")

[node name="Enemy" type="Sprite2D" parent="Enemy/Body"]
y_sort_enabled = true
material = SubResource("ShaderMaterial_5vw27")
position = Vector2(0, -16)
texture = ExtResource("3_h2yge")

[node name="Shadow" type="Sprite2D" parent="Enemy"]
self_modulate = Color(1, 1, 1, 0.39215687)
z_index = -1
position = Vector2(1, -23)
texture = ExtResource("2_h2yge")

[node name="CollisionShape2D" type="CollisionShape2D" parent="Enemy"]
position = Vector2(1, -12)
shape = SubResource("CircleShape2D_lquwl")

[node name="StaticBody2D" type="StaticBody2D" parent="."]
position = Vector2(221, 250)
scale = Vector2(1.08, 1)

[node name="CollisionShape2D" type="CollisionShape2D" parent="StaticBody2D"]
position = Vector2(-0.46296692, 0)
shape = SubResource("RectangleShape2D_7mycd")

[node name="Sprite2D" type="Sprite2D" parent="StaticBody2D"]
y_sort_enabled = true
scale = Vector2(0.9259259, 1)
texture = ExtResource("5_lquwl")

[node name="Camera2D" type="Camera2D" parent="." node_paths=PackedStringArray("player")]
position = Vector2(800, 283)
script = ExtResource("8_5vw27")
player = NodePath("../Personatge")

[node name="Caixa" type="RigidBody2D" parent="."]
position = Vector2(852, 140)
mass = 0.1
gravity_scale = 0.0
lock_rotation = true
linear_damp = 3.0
script = ExtResource("8_kek77")

[node name="CollisionShape2D" type="CollisionShape2D" parent="Caixa"]
position = Vector2(-852.5, -121)
shape = SubResource("RectangleShape2D_4c57u")

[node name="Sprite2D" type="Sprite2D" parent="Caixa"]
position = Vector2(-852, -140)
scale = Vector2(0.8, 1)
texture = ExtResource("9_kek77")

[node name="Checkerboard" type="Sprite2D" parent="."]
self_modulate = Color(1, 1, 1, 0.6509804)
z_index = -10
texture_repeat = 2
position = Vector2(762, 281)
texture = ExtResource("10_4c57u")
region_enabled = true
region_rect = Rect2(0, 0, 2000, 1000)

[node name="Button1" type="Sprite2D" parent="."]
z_index = -2
position = Vector2(949, 292)
texture = ExtResource("11_efxa6")

[node name="CanvasLayer" type="CanvasLayer" parent="."]

[node name="ProgressBar" type="ProgressBar" parent="CanvasLayer" node_paths=PackedStringArray("personatge")]
offset_right = 550.0
offset_bottom = 115.0
step = 1.0
script = ExtResource("14_w48qg")
personatge = NodePath("../../Personatge")

[node name="sign" type="Sprite2D" parent="."]
position = Vector2(799, 102)
texture = ExtResource("12_ycdy4")
script = ExtResource("13_w48qg")

[node name="Area2D" type="Area2D" parent="sign"]
scale = Vector2(-0.88063675, 0.7329722)

[node name="CollisionShape2D" type="CollisionShape2D" parent="sign/Area2D"]
position = Vector2(-5.677722, 85.951416)
rotation = -1.5870918
scale = Vector2(6.583811, -5.034087)
shape = SubResource("CircleShape2D_vivmo")

[node name="TileMapLayer" type="TileMapLayer" parent="."]
z_index = -1
position = Vector2(689, 324.00003)
scale = Vector2(2.5710034, 1.6240765)
tile_map_data = PackedByteArray("AAD///v/AAADAAAAAAD+//v/AAADAAAAAAD9//v/AAADAAAAAAD8//v/AAADAAAAAAAAAPv/AAADAAAAAAABAPv/AAADAAAAAAACAPv/AAADAAAAAAADAPv/AAADAAAAAAAEAPv/AAADAAAAAAAFAPv/AAAAAAAAAAAFAAMAAAADAAMAAAAFAAIAAAADAAIAAAAFAAEAAAADAAIAAAAFAAAAAAADAAIAAAAFAP//AAADAAIAAAAFAP7/AAADAAIAAAAFAP3/AAADAAIAAAD7/wMAAAAAAAIAAAAEAAMAAAABAAIAAAADAAMAAAABAAIAAAACAAMAAAABAAIAAAABAAMAAAABAAIAAAAAAAMAAAABAAIAAAD//wMAAAABAAIAAAD+/wMAAAABAAIAAAD9/wMAAAABAAIAAAD8/wMAAAABAAIAAAD7/wIAAAABAAAAAAD7/wEAAAABAAAAAAD7/wAAAAABAAAAAAAFAPz/AAADAAIAAAD7//v/AAABAAMAAAD7//z/AAABAAAAAAD7//3/AAABAAEAAAD7////AAACAAAAADA=")
tile_set = ExtResource("15_yaehf")

[node name="door" type="Sprite2D" parent="."]
position = Vector2(-85, 152)
texture = ExtResource("15_2cqfq")
script = ExtResource("16_yaehf")
requiresCondition = true
needs_key = true
key_id = "blue"

[node name="Area2D" type="Area2D" parent="door"]

[node name="CollisionShape2D" type="CollisionShape2D" parent="door/Area2D"]
position = Vector2(5, 27.5)
shape = SubResource("RectangleShape2D_2cqfq")

[node name="StaticBody2D" type="StaticBody2D" parent="door"]

[node name="CollisionShape2D" type="CollisionShape2D" parent="door/StaticBody2D"]

[node name="CanvasLayer2" type="CanvasLayer" parent="."]

[node name="Key" type="Sprite2D" parent="."]
position = Vector2(-1, -7)
texture = ExtResource("18_cegan")
script = ExtResource("19_82xsv")
key_id = "blue"

[node name="Area2D" type="Area2D" parent="Key"]

[node name="CollisionShape2D" type="CollisionShape2D" parent="Key/Area2D"]
position = Vector2(3, -0.5)
shape = SubResource("RectangleShape2D_getpj")

[connection signal="take_damage" from="Personatge" to="Camera2D" method="_on_personatge_take_damage"]
[connection signal="body_entered" from="sign/Area2D" to="sign" method="_on_area_2d_body_entered"]
[connection signal="body_exited" from="sign/Area2D" to="sign" method="_on_area_2d_body_exited"]
[connection signal="body_entered" from="door/Area2D" to="door" method="_on_area_2d_body_entered"]
[connection signal="body_exited" from="door/Area2D" to="door" method="_on_area_2d_body_exited"]
[connection signal="body_entered" from="Key/Area2D" to="Key" method="_on_area_2d_body_entered"]
[connection signal="body_exited" from="Key/Area2D" to="Key" method="_on_area_2d_body_exited"]
